{"version":3,"sources":["themes/theme.ts","containers/MyApp.tsx","index.tsx"],"names":["lightTheme","createMuiTheme","props","MuiAppBar","position","MuiCard","elevation","overrides","root","background","palette","default","darkTheme","type","grey","paper","MuiTable","MuiTypography","color","languages","defaultSchema","title","required","properties","thing","description","enum","otherThing","items","baz","definitions","MyApp","darkMode","useDarkMode","useState","setIsEditorReady","JSON","stringify","undefined","defaultValue","value","setValue","results","setResults","React","languageAnchorEl","setLanguageAnchorEl","selectedLanguage","setSelectedLanguage","useEffect","th","monaco","setTheme","t","useTranslation","theme","handleEditorDidMount","_","editor","a","modelUri","parse","model","createModel","setModel","fetch","then","data","json","schema","addDiagnostics","toString","result","Dereferencer","resolve","tr","Transpiler","to","e","console","error","handleTranspile","AppBar","Toolbar","Grid","container","alignContent","alignItems","justify","Typography","variant","style","paddingRight","Tooltip","Button","marginRight","onClick","event","currentTarget","endIcon","Menu","id","anchorEl","keepMounted","open","Boolean","onClose","Object","values","map","language","i","MenuItem","IconButton","window","toggle","CssBaseline","split","minSize","maxSize","defaultSize","flexGrow","height","onChange","ev","v","editorDidMount","options","minimap","enabled","wordWrap","lineNumbers","wrappingIndent","readOnly","showFoldingControls","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f3603fd5.chunk.js","sourcesContent":["import { createMuiTheme } from \"@material-ui/core/styles\";\nimport grey from \"@material-ui/core/colors/grey\";\n\nexport const lightTheme = createMuiTheme({\n  props: {\n    MuiAppBar: {\n      position: \"sticky\",\n    },\n    MuiCard: {\n      elevation: 0,\n    },\n  },\n  overrides: {\n    MuiAppBar: {\n      root: {\n        background: \"#fff !important\",\n      },\n    },\n  },\n  palette: {\n    background: {\n      default: \"#fff\",\n    },\n  },\n});\n\nexport const darkTheme = createMuiTheme({\n  props: {\n    MuiAppBar: {\n      position: \"sticky\",\n    },\n    MuiCard: {\n      elevation: 0,\n    },\n  },\n  palette: {\n    type: \"dark\",\n    background: {\n      default: grey[900],\n      paper: grey[800],\n    },\n  },\n  overrides: {\n    MuiAppBar: {\n      root: {\n        background: \"transparent !important\",\n      },\n    },\n    MuiTable: {\n      root: {\n        background: \"transparent !important\",\n      },\n    },\n    MuiTypography: {\n      root: {\n        color: grey[400],\n      },\n    },\n  },\n});\n\nexport default {\n  darkTheme,\n  lightTheme,\n};\n","import React, { useState, useEffect } from \"react\";\nimport { MuiThemeProvider, AppBar, Toolbar, Typography, IconButton, Tooltip, CssBaseline, Grid, Menu, Button, MenuItem } from \"@material-ui/core\"; //tslint:disable-line\nimport useDarkMode from \"use-dark-mode\";\nimport Brightness3Icon from \"@material-ui/icons/Brightness3\";\nimport ArrowDropDownIcon from \"@material-ui/icons/ArrowDropDown\";\nimport CodeIcon from \"@material-ui/icons/Code\";\nimport * as monaco from \"monaco-editor\";\nimport WbSunnyIcon from \"@material-ui/icons/WbSunny\";\nimport { lightTheme, darkTheme } from \"../themes/theme\";\nimport { useTranslation } from \"react-i18next\";\nimport SplitPane from \"react-split-pane\";\nimport Transpiler, { SupportedLanguages } from \"@json-schema-tools/transpiler\";\nimport Dereferencer from \"@json-schema-tools/dereferencer\";\nimport \"./MyApp.css\";\nimport Editor from \"@etclabscore/react-monaco-editor\";\nimport { addDiagnostics } from \"@etclabscore/monaco-add-json-schema-diagnostics\";\n\nconst languages: SupportedLanguages[] = [\"typescript\", \"golang\", \"python\", \"rust\"];\n\nconst defaultSchema = {\n  title: \"example\",\n  type: \"object\",\n  required: [\"thing\"],\n  properties: {\n    thing: {\n      title: \"bar\",\n      description: \"This is a bar thing\",\n      type: \"string\",\n      enum: [ \"one\", \"two\", \"three\" ]\n    },\n    otherThing: {\n      description: \"generated Title when there is none\",\n      type: \"array\",\n      items: {\n        title: \"foo\",\n        type: \"number\"\n      }\n    },\n    baz: {\n      \"$ref\": \"#/definitions/baz\"\n    }\n  },\n  definitions: {\n    baz: { type: \"number\", title: \"baz\" }\n  }\n};\n\nconst MyApp: React.FC = () => {\n  const darkMode = useDarkMode();\n  const [, setIsEditorReady] = useState(false);\n  const [defaultValue] = useState(JSON.stringify(defaultSchema, undefined, \"  \"));\n  const [value, setValue] = useState(defaultValue);\n  const [results, setResults] = useState(\"\");\n  const [languageAnchorEl, setLanguageAnchorEl] = React.useState<null | HTMLElement>(null);\n  const [selectedLanguage, setSelectedLanguage]: [SupportedLanguages, any] = useState(\"typescript\");\n\n  useEffect(() => {\n    const th = darkMode.value ? \"vs-dark\" : \"vs\";\n    monaco.editor.setTheme(th);\n  }, [darkMode.value]);\n\n  function handleTranspile() {\n    try {\n      const result = JSON.parse(value);\n      const dereffer = new Dereferencer(result);\n      dereffer.resolve().then((schema) => {\n        const tr = new Transpiler(schema);\n        setResults(tr.to(selectedLanguage));\n      });\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  const { t } = useTranslation();\n  const theme = darkMode.value ? darkTheme : lightTheme;\n\n  const handleLanguageClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setLanguageAnchorEl(event.currentTarget);\n  };\n  const handleLanguageClose = () => {\n    setLanguageAnchorEl(null);\n  };\n  const handleLanguageChange = (lang: string) => {\n    setSelectedLanguage(lang);\n    setLanguageAnchorEl(null);\n  };\n\n  const handleEditorDidMount = async (_: any, editor: any) => {\n    setIsEditorReady(true);\n    const modelUriString = \"inmemory://json-schema-tools-playground.json\";\n    const modelUri = monaco.Uri.parse(modelUriString);\n    const model = monaco.editor.createModel(value || \"\", \"json\", modelUri);\n    editor.setModel(model);\n    const schema = await fetch(\"https://json-schema.org/draft-07/schema\").then((data) => data.json());\n    addDiagnostics(modelUri.toString(), schema, monaco);\n  };\n\n  const handleReadOnlyEditorDidMount = (editor: any) => {\n    // noop\n  };\n\n  useEffect(() => {\n    handleTranspile();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [value, selectedLanguage]);\n\n  return (\n    <MuiThemeProvider theme={theme}>\n      <AppBar position=\"static\" color=\"default\" elevation={0}>\n        <Toolbar>\n          <Grid container alignContent=\"center\" alignItems=\"center\" justify=\"flex-start\">\n            <Typography variant=\"h6\" style={{ paddingRight: \"20px\" }}>{t(\"json-schema.tools\") as string}</Typography>\n            <Typography variant=\"caption\" style={{ paddingRight: \"5px\" }}>\n              {t(\"playground\") as string}\n            </Typography>\n          </Grid>\n          <Grid container alignContent=\"center\" alignItems=\"center\" justify=\"flex-end\">\n            {<>\n              <Tooltip title={\"Language\"} >\n                <>\n                  <Typography variant=\"body1\" style={{ paddingRight: \"10px\" }}>Language:</Typography>\n                  <Button\n                    style={{ marginRight: \"10px\" }}\n                    onClick={handleLanguageClick} variant=\"outlined\" endIcon={\n                      <ArrowDropDownIcon />\n                    }>{selectedLanguage}</Button>\n                </>\n              </Tooltip>\n              <Menu\n                id=\"input-menu\"\n                anchorEl={languageAnchorEl}\n                keepMounted\n                open={Boolean(languageAnchorEl)}\n                onClose={handleLanguageClose}\n              >\n                {Object.values(languages).map((language, i) => (\n                  <MenuItem onClick={(event) => handleLanguageChange(language)}>{language}</MenuItem>\n                ))}\n              </Menu>\n            </>\n            }\n            <Tooltip title={t(\"json-schema.tools Github\") as string}>\n              <IconButton\n                onClick={() =>\n                  window.open(\"https://github.com/json-schema-tools/\")\n                }>\n                <CodeIcon />\n              </IconButton>\n            </Tooltip>\n            <Tooltip title={t(\"Toggle Dark Mode\") as string}>\n              <IconButton onClick={darkMode.toggle}>\n                {darkMode.value ? <Brightness3Icon /> : <WbSunnyIcon />}\n              </IconButton>\n            </Tooltip>\n          </Grid>\n        </Toolbar>\n      </AppBar>\n      <CssBaseline />\n      <SplitPane split=\"vertical\" minSize={100} maxSize={-100} defaultSize={\"35%\"} style={{ flexGrow: 1 }}>\n        <Editor\n          height=\"90vh\"\n          value={defaultValue}\n          onChange={(ev: any, v: string) => {\n            setValue(v);\n          }}\n          editorDidMount={handleEditorDidMount}\n          language=\"json\"\n        />\n        <Editor\n          height=\"90vh\"\n          editorDidMount={handleReadOnlyEditorDidMount}\n          options={{\n            minimap: {\n              enabled: false,\n            },\n            wordWrap: \"on\",\n            lineNumbers: \"off\",\n            wrappingIndent: \"deepIndent\",\n            readOnly: true,\n            showFoldingControls: \"always\",\n          }}\n          value={results}\n          language={selectedLanguage}\n        />\n        <div>\n        </div>\n      </SplitPane>\n    </MuiThemeProvider>\n  );\n};\n\nexport default MyApp;\n","import ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport MyApp from \"./containers/MyApp\";\n\nReactDOM.render(<MyApp />, document.getElementById(\"root\"));\n"],"sourceRoot":""}